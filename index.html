<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V√≤ng Quay May M·∫Øn</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; background-color: #f4f4f9; padding: 20px; }
        .container { max-width: 500px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { color: #d32f2f; }
        .prize-display { font-size: 48px; font-weight: bold; margin: 30px 0; min-height: 60px; color: #1976d2; border: 2px dashed #ccc; line-height: 60px; border-radius: 10px; }
        button { padding: 15px 30px; font-size: 18px; cursor: pointer; background-color: #4caf50; color: white; border: none; border-radius: 5px; transition: 0.3s; }
        button:disabled { background-color: #ccc; cursor: not-allowed; }
        .inventory { margin-top: 20px; text-align: left; font-size: 14px; color: #666; }
        .history { margin-top: 20px; border-top: 1px solid #eee; padding-top: 10px; text-align: left; max-height: 150px; overflow-y: auto; }
    </style>
</head>
<body>

<div class="container">
    <h1>üéâ Quay S·ªë May M·∫Øn</h1>
    
    <div class="prize-display" id="result">?</div>
    
    <button id="spinBtn" onclick="spin()">QUAY S·ªê</button>

    <div class="inventory">
        <strong>S·ªë l∆∞·ª£ng c√≤n l·∫°i:</strong>
        <ul>
            <li>Gi·∫£i 50k: <span id="count50">5</span></li>
            <li>Gi·∫£i 20k: <span id="count20">10</span></li>
            <li>Gi·∫£i 10k: Kh√¥ng gi·ªõi h·∫°n</li>
        </ul>
    </div>

    <div class="history" id="history">
        <strong>L·ªãch s·ª≠ tr√∫ng gi·∫£i:</strong>
    </div>
</div>

<script>
    // C·∫§U H√åNH S·ªê L∆Ø·ª¢NG GI·∫¢I TH∆Ø·ªûNG T·∫†I ƒê√ÇY
    let inventory = {
        "50.000ƒë": 5,
        "20.000ƒë": 10,
        "10.000ƒë": Infinity
    };

    function spin() {
        const btn = document.getElementById('spinBtn');
        const resultDiv = document.getElementById('result');
        btn.disabled = true;
        resultDiv.innerText = "ƒêang quay...";

        // Hi·ªáu ·ª©ng ch·∫°y s·ªë gi·∫£ l·∫≠p
        let counter = 0;
        const interval = setInterval(() => {
            const tempPrizes = ["10.000ƒë", "20.000ƒë", "50.000ƒë"];
            resultDiv.innerText = tempPrizes[Math.floor(Math.random() * tempPrizes.length)];
            counter++;
            if (counter > 20) {
                clearInterval(interval);
                finalizeResult();
            }
        }, 50);
    }

    function finalizeResult() {
        const btn = document.getElementById('spinBtn');
        const resultDiv = document.getElementById('result');
        
        // Logic x√°c su·∫•t v√† ki·ªÉm tra kho
        let pool = [];
        
        // Th√™m c√°c gi·∫£i v√†o "t√∫i" d·ª±a tr√™n s·ªë l∆∞·ª£ng c√≤n l·∫°i
        if (inventory["50.000ƒë"] > 0) pool.push("50.000ƒë");
        if (inventory["20.000ƒë"] > 0) pool.push("20.000ƒë");
        
        // Lu√¥n c√≥ gi·∫£i 10k v√† chi·∫øm t·ªâ l·ªá cao h∆°n n·∫øu mu·ªën (v√≠ d·ª• cho 5 ph·∫ßn 10k v√†o t√∫i)
        for(let i=0; i<5; i++) pool.push("10.000ƒë");

        // Ch·ªçn ng·∫´u nhi√™n t·ª´ t√∫i
        const finalPrize = pool[Math.floor(Math.random() * pool.length)];

        // C·∫≠p nh·∫≠t kho
        if (inventory[finalPrize] !== Infinity) {
            inventory[finalPrize]--;
        }

        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        resultDiv.innerText = finalPrize;
        updateUI(finalPrize);
        btn.disabled = false;
    }

    function updateUI(prize) {
        document.getElementById('count50').innerText = inventory["50.000ƒë"];
        document.getElementById('count20').innerText = inventory["20.000ƒë"];
        
        const historyDiv = document.getElementById('history');
        const newItem = document.createElement('div');
        newItem.innerText = `- ƒê√£ tr√∫ng: ${prize} (${new Date().toLocaleTimeString()})`;
        historyDiv.prepend(newItem);
    }
</script>

</body>
</html>
